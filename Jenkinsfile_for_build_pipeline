
//START PIPELINE
pipeline {
agent {label 'mvn'}

  //Define needed parameters
  parameters{
                    // Parameters used for Building Stage of Package
   string(defaultValue: 'https://github.com/hluci93/maven-web-application', description: 'GitHub Repository used for importing configuration.', name: 'git_repo')
   string(defaultValue: 'master', description: 'Specify your Git branch', name: 'git_repo_branch')
                           
  }
      
    options{
    timestamps()
    buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '2', numToKeepStr: '5'))
    }

tools {
          maven "3.8.5"
        }
stages {

  stage("Git-Checkout")
        {
            steps 
                {
                // Get code from GitHub repository
                git branch: "${params.git_repo_branch}", credentialsId: 'c9d8cdef-1edb-4e31-9682-ed6d205f722b', url: "${params.git_repo}"
                }
        } 
  stage("Build Package")
        {  
         steps
              {
              echo 'Building package'
              sh 'mvn --version'
              sh 'mvn clean package'
             }
        }
      }//Stages Closing
}//Pipeline closing



